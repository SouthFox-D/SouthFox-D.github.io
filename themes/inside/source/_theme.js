!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).__inside__||(self.__inside__={}))}(this,(function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},n=/#(?:[0-9a-fA-F]{3}){1,2}/,r=/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,o="__inside__",i='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif',a={accent_color:"#2a2b33",foreground_color:"#363636",border_color:"#e0e0e0",background:"#f3f6f7",sidebar_background:"#2a2b33",card_background:"#fff",content_width:"660px",font:{base:i,logo:i,menu:i,heading:i,label:i,code:i,print:i},highlight:["#ffffff","#e0e0e0","#f3f6f7","#95a5b3","#363636","#262b2f","#000000","#000000","#5d6c7b","#40464a","#2980b9","#be516e","#237dac","#944770","#239371","#edf0f3"]},c="undefined"!=typeof document;if(c){document.addEventListener("inside:theme",(function(e){document.dispatchEvent(new CustomEvent("inside",{detail:{type:"theme",data:e.detail}}))})),document.addEventListener("inside",(function(e){if(!c||"theme"!==e.detail.type)return!1;d(e.detail.data)}));var f=localStorage.getItem(o);if(f)try{var u=JSON.parse(f);u.hash===(window[o]||{}).hash&&d(u.theme)}catch(e){}}function d(e){var t=document.querySelector('style[is="theme"]'),n=document.querySelector('meta[name="theme-color"]'),r=window[o]||{};t||((t=document.createElement("style")).setAttribute("is","theme"),document.body.appendChild(t)),r.theme=Object.assign({},r.theme,e),r.color=[_(r.theme.sidebar_background).color||r.theme.accent_color].concat(_(r.theme.background).color||[]),t.innerHTML=l(r.theme),n&&(n.content=r.color[r.color.length-1]),localStorage.setItem(o,JSON.stringify({theme:r.theme,hash:r.hash}))}function l(e){if(!e)return"";var o=function(e,t){var n={},r=e.accent_color,o=e.foreground_color,i=e.border_color,a=e.background,c=e.sidebar_background,f=e.card_background,u=e.font,d=void 0===u?{}:u,l=e.content_width,s=e.highlight;n.accent_color=r?g(r).hex:t.accent_color,n.foreground_color=o?g(o).hex:t.foreground_color,n.border_color=i?g(i).hex:t.border_color,n.background=a?h(a):t.background,n.sidebar_background=c?h(c):n.accent_color||t.sidebar_background,n.card_background=f?h(f):t.card_background;var b=d.base?m(d.base):t.font.base.split(",");n.font={base:String(b)},n.font.logo=d.logo?m(d.logo,b).join(","):t.font.logo,n.font.menu=d.menu?m(d.menu,b).join(","):t.font.menu,n.font.heading=d.heading?m(d.heading,b).join(","):t.font.heading,n.font.label=d.label?m(d.label,b).join(","):t.font.label,n.font.code=d.code?m(d.code).join(","):t.font.code,n.font.print=d.print?m(d.print).join(","):t.font.print;var _=function(e){if(!e)return;if("number"==typeof e)return{value:e,unit:"px"};var t=e.match(/^(\d+)(%|rem|px)$/);if(t)return{value:+t[1],unit:t[2]}}(l);n.content_width=_?_.value+_.unit:t.content_width,Array.isArray(s)?(n.highlight=s.map((function(e){return g(e).hex})).filter((function(e){return e})),n.highlight.length<16&&(n.highlight=t.highlight)):n.highlight=t.highlight;return n}(e,a),i=(o.card_background.match(n)||o.card_background.match(r)||[])[0]||o.foreground_color,c=g(o.accent_color);return"html{"+function(e,t){void 0===e&&(e={});void 0===t&&(t="var");return n(e);function n(e,r,o){void 0===r&&(r=[]);var i=function(i){var a=e[i];if(Array.isArray(a))a.forEach((function(e,t){var o,a=t.toString(16);return a.length<2&&(a="0"+a),n(((o={})[a]=e,o),r,i)}));else if("object"==typeof a)n(a,r,i);else{var c=(o?o+"_":"")+i;r.push(["--"+t+"-"+c.replace(/_/g,"-"),a,c])}};for(var a in e)i(a);return r}}(t(t({},o),{card_color:i,accent_color_005:"rgba("+c.r+","+c.g+","+c.b+",.05)",accent_color_01:"rgba("+c.r+","+c.g+","+c.b+",.1)",accent_color_02:"rgba("+c.r+","+c.g+","+c.b+",.2)",accent_color_04:"rgba("+c.r+","+c.g+","+c.b+",.4)",accent_color_08:"rgba("+c.r+","+c.g+","+c.b+",.8)",accent_color:c.hex}),"inside").map((function(e){return e.slice(0,2).join(":")})).join(";")+"}"}function h(e){var t=/(^data:image)|(^[^\(^'^"]*\.(jpg|png|gif|svg))/;return e.split(/\s+/).map((function(e){return e.match(t)?"url("+e+")":e})).join(" ")}function g(e,o){if(e=(e||"").trim(),n.test(e))return t({hex:e},b(e));if(r.test(e)){var i=e.match(r).slice(1,4).map((function(e){return+e})).filter((function(e){return e<256}));if(3===i.length)return{hex:s.apply(null,i),r:i[0],g:i[1],b:i[2]}}return o?t({hex:o},b(o)):{}}function s(e,t,n){return"#"+((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)}function b(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function m(e,t){void 0===t&&(t=[]);var n=e?e.split(","):[],r=[];return n.forEach((function(e){(e=e.trim())&&!~t.indexOf(e)&&r.push(e)})),r.concat(t)}function _(e){if(!e)return{};var t=e.split(/\s+/);if(n.test(t[0]))return{color:t[0],image:t.slice(1).join(" ")};var r=t.length-1;return t[r]&&n.test(t[r])?{color:t.pop(),image:t.join(" ")}:{image:e}}e.css=l,Object.defineProperty(e,"__esModule",{value:!0})}));
