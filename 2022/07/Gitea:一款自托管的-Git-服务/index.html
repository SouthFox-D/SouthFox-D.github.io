<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta property="og:title" content="Gitea:ä¸€æ¬¾è‡ªæ‰˜ç®¡çš„ Git æœåŠ¡ â€” ç‹ç‹¸åèµ°çŸ£" /><meta property="og:site_name" content="ç‹ç‹¸åèµ°çŸ£" /><meta property="og:image" content="https://blog.southfox.me/favicon.png" /><meta name="fediverse:creator" content="SouthFox@foxsay.southfox.me" /><title>Gitea:ä¸€æ¬¾è‡ªæ‰˜ç®¡çš„ Git æœåŠ¡ â€” ç‹ç‹¸åèµ°çŸ£</title><link rel="me" href="https://foxsay.southfox.me/@SouthFox" /><link rel="me" href="https://codeberg.org/southfox" /><script src="/assets/js/lips.min.js"></script><link rel="stylesheet" href="/assets/css/main.css" /><script type="text/x-scheme">(let ((font (or (localStorage.getItem "font") "zpix")) (font-select (document.getElementById "font-select"))) (define (string=? a b) (== (a.cmp b) 0)) (define (loop-set options value) (let loop ((i 0)) (if (> i (- (length options) 1)) i (let ((option (get options i))) (if (string=? option.value value) (option.setAttribute "selected" #t) (loop (+ 1 i))))))) (define (set-font font-name) (localStorage.setItem "font" font-name) (document.documentElement.setAttribute "data-font" font-name) (if font-select (loop-set font-select.options font-name))) (font-select.addEventListener "change" (lambda (event) (set-font event.target.value))) (set-font font))</script><link rel="alternative" href="/feed.xml" title="ç‹ç‹¸åèµ°çŸ£" type="application/atom+xml" /><link rel="alternative" href="/rss2.xml" title="ç‹ç‹¸åèµ°çŸ£" type="application/rss+xml" /></head><body><nav class="nav"><a href="/" class="brand"><span>ç‹ç‹¸åèµ°çŸ£</span></a><input id="bmenub" type="checkbox" class="show" aria-label="open menu" /><label for="bmenub" class="burger pseudo button">â˜°</label><div class="menu"><a href="/archives/">å½’æ¡£</a><a href="/tags/">æ ‡ç­¾</a><a href="/search/">æœç´¢</a><a href="/about/">å…³äº</a></div></nav><div class="container flex"><div class="content"><main data-pagefind-body="true"><div><h2>Gitea:ä¸€æ¬¾è‡ªæ‰˜ç®¡çš„ Git æœåŠ¡</h2><h3>by SouthFox</h3><h3 data-pagefind-sort="date">2022-07-17</h3><div><p>åˆ«å¿˜äº†æ³¡ä¸Šä¸€æ¯èŒ¶ï¼</p><span id="more"></span><h2 id="ç»•ä¸å¼€çš„å­˜åœ¨">ç»•ä¸å¼€çš„å­˜åœ¨</h2><p>å½“ç„¶ï¼Œè°ˆåˆ° <code>Git</code> æœåŠ¡æ—¶ï¼Œè‚¯å®šç»•ä¸è¿‡ <code>GitHub</code> ã€‚ä¸ºä»€ä¹ˆè¦å¤§è´¹å‘¨ç« è‡ªå»ºå‘¢ï¼Ÿ<code>GitHub</code> ä¸å¥½å—ï¼Ÿ</p><p>æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯ä¹Ÿæ²¡é‚£ä¹ˆå¥½ï¼Œå› ä¸ºï¼š</p><ul><li><code>GitHub</code> æ˜¯ä¸€å®¶å•†ä¸šå…¬å¸ï¼Œé‚£ä¹ˆé¦–å…ˆç›ˆåˆ©è‚¯å®šæ˜¯é¦–è¦ç›®çš„ï¼Œä¸ºäº†ä¸å€’é—­ï¼ŒæŒ‡ä¸å‡†æœªæ¥å“ªå¤©å°±å˜è´¨äº†ã€‚</li><li>åŒä¸Šï¼Œå¦‚æœè¿˜æ˜¯ä¸ªè‡ªç”±è½¯ä»¶çˆ±å¥½è€…çš„è¯ï¼Œæƒ³å¿… <code>GitHub</code> æœ€è¿‘ä¸€äº›äº‹ä»¶å¸¦æ¥çš„è‡­å‘³ä¹Ÿä¸å¿…æˆ‘å†æäº†â€¦â€¦</li><li><code>Git</code> æ˜¯åˆ†å¸ƒå¼çš„ï¼Œé‚£ä¹ˆé€‰æ‹©åŒæ ·ä¹Ÿæ˜¯â€¦â€¦ä¸çŸ¥é“ç°åœ¨è¿˜æœ‰å¤šå°‘äººè¿˜å‚»å‚»è®¤ä¸º <code>Git</code> å’Œ <code>GitHub</code> æ˜¯ä¸€ä½“çš„å‘¢ï¼Ÿ</li></ul><p>ä¹Ÿå¯å‚è§ <a href="https://sfconservancy.org/GiveUpGitHub/" class="external_link">GiveUpGitHub</a> ä¸€æ–‡ç« ã€‚</p><h2 id="Gitea">Gitea</h2><p><code>Gitea</code> æ˜¯ä¸€ä¸ªç”¨ <code>Go</code> ç¼–å†™ã€é¢å‘è‡ªå»ºçš„ã€è½»é‡çº§çš„ <code>Git</code> æœåŠ¡ã€‚å…¶å®‰è£…ååˆ†ä¾¿æ·ï¼Œç›´æ¥ä¸‹è½½ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ä¹Ÿå¯å¿«é€Ÿæ­å»ºèµ·æ¥ï¼Œå½“ç„¶ä¸ºäº†åç»­è·Ÿå…¶å®ƒæœåŠ¡è”åŠ¨ï¼Œè¿˜æ˜¯ç”¨ <code>docker-compose</code> æ–¹ä¾¿ç‚¹ã€‚</p><p>è¯ä¸å¤šè¯´ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç„¶åå¾€é‡Œå»º <code>docker-compose.yml</code> æ–‡ä»¶å¹¶å†™å…¥ä»¥ä¸‹é…ç½®ï¼š</p><pre><code>version: &quot;3.7&quot;

services:
  gitea:
    image: gitea/gitea:latest
    container_name: gitea
    restart: unless-stopped
    environment:
      - USER_UID=1000
      - USER_GID=1000
    volumes:
      - ./data/gitea:/data
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    ports:
      - &quot;127.0.0.1:3000:3000&quot;
      - &quot;2222:22&quot;
    networks:
      - cicd_net

  drone:
    container_name: drone
    image: drone/drone:latest
    restart: unless-stopped
    depends_on:
      - gitea
    environment:
      # https://docs.drone.io/server/provider/gitea/
      - DRONE_DATABASE_DRIVER=sqlite3
      - DRONE_DATABASE_DATASOURCE=/data/database.sqlite
      - DRONE_GITEA_SERVER=https://my.git.server/
      - DRONE_GIT_ALWAYS_AUTH=false
      - DRONE_RPC_SECRET=changeme...
      - DRONE_SERVER_PROTO=https
      - DRONE_SERVER_HOST=https://cicd.git.server
      - DRONE_GITEA_CLIENT_ID=changeme...
      - DRONE_GITEA_CLIENT_SECRET=changeme...
    ports:
      - &quot;127.0.0.1:3001:80&quot;
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ./data/drone:/data
    networks:
      - cicd_net

  drone-runner:
    container_name: drone-runner
    image: drone/drone-runner-docker:latest
    restart: unless-stopped
    depends_on:
      - drone
    environment:
      # https://docs.drone.io/runner/docker/installation/linux/
      # https://docs.drone.io/server/metrics/
      - DRONE_RPC_PROTO=http
      - DRONE_RPC_HOST=drone
      - DRONE_RPC_SECRET=changeme...
      - DRONE_RUNNER_NAME=&quot;action-runner&quot;
      - DRONE_RUNNER_CAPACITY=2
      - DRONE_RUNNER_NETWORKS=cicd_net
      - DRONE_DEBUG=false
      - DRONE_TRACE=false
    networks:
      - cicd_net
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

networks:
  cicd_net:
    name: cicd_net</code></pre><p>å› ä¸ºé¢„æƒ³åœºæ™¯æ˜¯ç§äººè‡ªç”¨ï¼Œæ‰€ä»¥é€‰æ‹©äº† <code>SQlite3</code> æ•°æ®åº“ï¼Œè§‰å¾—åˆ«æ‰­å¯ä»¥è‡ªå·±æ”¹æ‰â€¦â€¦</p><p>ç„¶åå‡†å¤‡ä¸¤ä¸ªåŸŸåï¼Œè¿™é‡Œç”¨ <code>my.git.server</code> åŸŸåæŒ‡å®šç”¨æ¥è¿è¡Œ <code>Gitea</code> æœåŠ¡çš„åŸŸåï¼Œä¸€ä¸ª <code>cicd.git.server</code> åŸŸåç”¨æ¥æŒ‡å®šè¿è¡Œåç»­çš„è‡ªåŠ¨æ„å»ºæœåŠ¡çš„åŸŸåï¼ˆå¯é€‰ï¼‰ã€‚</p><p>é¦–å…ˆä¸º <code>my.git.server</code> åŸŸåè®¾å®š<code>DNS</code> åç”³è¯·è¯ä¹¦ï¼Œ<code>certbot certonly --nginx -d my.git.server</code></p><p>ï¼Œç”³è¯·åå†™å…¥ <code>nginx</code> é…ç½®ï¼š</p><pre><code>#ä¸è¦å¿˜äº†æ›¿æ¢æˆè‡ªå·±çš„åŸŸå
server {
    listen 80;
    listen [::]:80;
    server_name my.git.server;

    location /.well-known/acme-challenge {}
    location / {
        return 301 https://$host$request_uri;
    }
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name my.git.server;

    access_log  /var/log/nginx/access.log;
    #root /home/plume/Plume/ ;

    ssl_certificate /etc/letsencrypt/live/my.git.server/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/my.git.server/privkey.pem;

    # for ssl conf: https://cipherli.st/
    ssl_protocols TLSv1.2 TLSv1.3;# Requires nginx &gt;= 1.13.0 else use TLSv1.2
    ssl_prefer_server_ciphers on;
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;# openssl dhparam -out /etc/letsencrypt/ssl-dhparam.pem 4096
    ssl_ciphers ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;
    ssl_ecdh_curve secp384r1; # Requires nginx &gt;= 1.1.0
    ssl_session_timeout  10m;
    ssl_session_cache shared:SSL:10m;
    ssl_session_tickets off; # Requires nginx &gt;= 1.5.9
    ssl_stapling on; # Requires nginx &gt;= 1.3.7
    ssl_stapling_verify on; # Requires nginx =&gt; 1.3.7
    resolver 9.9.9.9 80.67.169.12 valid=300s;
    resolver_timeout 5s;
    add_header Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;;
    add_header X-Frame-Options DENY;
    add_header X-Content-Type-Options nosniff;
    add_header X-XSS-Protection &quot;1; mode=block&quot;;
    #å¦‚æœä¸æƒ³æ˜¾ç¤ºå¤–é“¾å›¾ç‰‡å¯æŠŠ img-src ä¸€æ æ”¹æ‰
    add_header Content-Security-Policy &quot;default-src 'self'; img-src *; frame-ancestors 'self'; frame-src https:&quot;;

    location / {
        proxy_pass http://localhost:3000/;
        proxy_set_header Host $http_host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        client_max_body_size 50m;
    }
}</code></pre><p>ä¹‹å <code>nginx -s reload</code> é‡è½½é…ç½®ï¼Œç„¶å <code>docker-compose up -d gitea</code> æŠŠ <code>Gitea</code> æœåŠ¡å¯åŠ¨ï¼Œä¹‹åå‰å¾€ <code>my.git.server</code> åœ°å€è¿›è¡Œé…ç½®å¹¶æ–°å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦æˆ·ã€‚</p><h3 id="Drone">Drone</h3><p>åˆ°æ­¤æœåŠ¡å°±åŸºæœ¬å¯ç”¨äº†ï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡å¾ˆå¤šäººå‰²èˆä¸ä¸‹ <code>GitHub</code> çš„ä¸€ä¸ªåŸå› å°±æ˜¯å› ä¸ºå®ƒçš„ <code>Actions</code> å¾ˆé¦™ã€‚ä¸è¿‡å¯ä»¥é€‰æ‹© <code>Drone</code> ï¼Œä¸€ä¸ªåŒæ ·ç”¨ <code>GO</code> ç¼–å†™çš„ã€è½»é‡çº§çš„è‡ªåŠ¨æ„å»ºæœåŠ¡ï¼Œä¹Ÿå¯ä»¥è®©ä½“éªŒå¾€ <code>GitHub Actions</code> é æ‹¢ã€‚</p><p>é¦–å…ˆä¸º <code>cicd.git.server</code> åŸŸåç”³è¯·è¯ä¹¦å¹¶å†™å…¥ <code>nginx</code> é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å¯å¤ç”¨ä¸Šé¢çš„ï¼Œåªéœ€è¦æ›´æ”¹ç›¸å…³åŸŸåå’Œ <code>nginx</code> é…ç½®æ–‡ä»¶é‡Œçš„ <code>location /</code> é‡Œçš„ <code>proxy_pass</code> ç«¯å£å·å°±è¡Œï¼ˆæœ¬ä¾‹å­æ˜¯ <code>3001</code>ï¼‰ã€‚</p><p>ä¹‹åä¸º <code>Drone</code> å’Œ <code>Gitea</code> è”åŠ¨åšå‡†å¤‡ï¼Œç™»é™†è‡ªå·± <code>Gitea</code> å®ä¾‹çš„å¸å·â†’è®¾ç½®â†’åº”ç”¨â†’åˆ›å»ºæ–°çš„ OAuth2 åº”ç”¨ç¨‹åºï¼Œåº”ç”¨åç§°éšæ„å¡«ï¼ˆæœ¬ä¾‹å­å¡« droneï¼‰ï¼Œé‡å®šå‘ URI å¡«å…¥ <code>https://cicd.git.server/login</code> ï¼ˆæ›¿æ¢æˆè‡ªå·±çš„åŸŸåï¼‰ã€‚</p><p>ç‚¹å‡»åˆ›å»ºåº”ç”¨â†’ä¼šç”Ÿæˆä¸€ä¸ªå®¢æˆ·ç«¯ ID å’Œä¸€ä¸ªå®¢æˆ·ç«¯å¯†é’¥â†’æ›¿æ¢åˆ°ä¸Šè¿° <code>docker-compose.yml</code> é‡Œ <code>drone</code> ä¸€æ çš„ <code>DRONE_GITEA_CLIENT_ID</code> å’Œ <code>DRONE_GITEA_CLIENT_SECRET</code> ã€‚</p><p>ä¹‹åå†ä½¿ç”¨ <code>openssl rand -hex 16</code> å‘½ä»¤ç”Ÿæˆä¸€ä¸²éšæœºå­—ç¬¦ä¸²ç»™ <code>DRONE_RPC_SECRET</code> ä½¿ç”¨ï¼ˆæœ‰ä¸¤ä¸ªåœ°æ–¹éœ€è¦æ›¿æ¢ï¼‰ã€‚</p><p>ç¡®è®¤æ— è¯¯åä½¿ç”¨ <code>docker-compose up -d</code> å¯åŠ¨å…¨éƒ¨æœåŠ¡ï¼Œä¹‹åå‰å¾€ <code>https://cicd.git.server</code> åœ°å€æŸ¥çœ‹æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œæ˜¯çš„è¯ç‚¹å‡»ç™»é™†ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿå’Œ <code>Gitea</code> è¿›è¡Œè”åŠ¨ï¼Œå¦‚æœæ˜¾ç¤ºé”™è¯¯è¯·æ£€æŸ¥æ˜¯å¦ä¸ä¸Šè¿°é…ç½®ä¸€è‡´ï¼ˆä¾‹å¦‚æˆ‘ä¹‹å‰å°±é‡åˆ°äº†æ— æ³•éªŒè¯çš„é”™è¯¯ï¼Œæ’æŸ¥åå‘ç°æ˜¯æŸä¸ªè·¯å¾„å¤šå¸¦äº†ä¸€ä¸ª <code>/</code> å¯¼è‡´ä¹‹åç”Ÿæˆçš„éªŒè¯è·¯å¾„å‡ºé”™ï¼Œå»æ‰ <code>/</code> ä¹‹åå°±æ­£å¸¸äº†ï¼‰ã€‚</p><h3 id="ä»“åº“æ“ä½œ">ä»“åº“æ“ä½œ</h3><p>å› ä¸ºå®¿ä¸»æœºçš„ <code>22</code> ç«¯å£å·²è¢«å ç”¨ï¼Œæ‰€ä»¥å…‹éš†æˆ–è€… <code>PUSH</code> ä»“åº“ä½¿ç”¨çš„ç«¯å£åº”è¯¥ä¸º <code>2222</code>ï¼Œè§‰å¾—åˆ«æ‰­ä¹Ÿæœ‰å…¶ä»–æ•™ç¨‹æ•™å¦‚ä½•ä¸å®¿ä¸»æœºå…±ç”¨ç«¯å£ï¼Œæˆ‘å°±ä¸æŠ˜è…¾äº†ï¼ˆåæ­£ <code>Just work!</code> ï¼‰ã€‚</p><p>è¿˜æœ‰å¦‚æœä¸ºç½‘ç«™ä½¿ç”¨äº† <code>Cloudflare</code> ä¹‹ç±»çš„ <code>CDN</code> æœåŠ¡çš„è¯ï¼Œé‚£ä¹ˆ <code>SSH</code> åè®®ä¹Ÿæ˜¯ä¸èƒ½ç”¨çš„ï¼Œå¾—ç”¨ç½‘ç«™åŸŸåä¸‹çš„çœŸå® <code>IP</code> åœ°å€å…‹éš†æˆ– <code>PUSH</code> ä»“åº“ã€‚</p><p>å¦‚æœåƒæˆ‘ä»€ä¹ˆéƒ½æ²¡æ”¹çš„è¯ï¼Œæƒ³è¦å…‹éš†ä»“åº“å°±ä¼šå¾—åˆ°è¿™ä¹ˆä¸€ä¸ªå¥‡æ€ªçš„åœ°å€ï¼š</p><p><code>git clone ssh://git@æœºå­çœŸå®IP:2222/ç”¨æˆ·å/ä»“åº“å.git</code></p><p>åæ­£ <code>Just work</code>  ï¼</p><h3 id="ä¸€ä¸ªæ¡ˆä¾‹">ä¸€ä¸ªæ¡ˆä¾‹</h3><p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±è®²è®²æˆ‘ç”¨è¿™å¥—æœåŠ¡çš„æ¡ˆä¾‹å§ï¼Œè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å¹¶æ¨é€ä¸€ä¸ª <code>HUGO</code> åšå®¢ã€‚</p><p>é¦–å…ˆä¸ºä»“åº“æ ¹ç›®å½•å†™ä¸‹ <code>.drone.yml</code> æ–‡ä»¶ï¼š</p><pre><code>kind: pipeline
name: build

steps:
- name: build
  image: klakegg/hugo:alpine
  commands:
  - hugo

- name: deploy
  image: node
  environment:
    CLOUDFLARE_API_TOKEN:
      from_secret: api_token
    CLOUDFLARE_ACCOUNT_ID:
      from_secret: account_id
  commands:
  - npm install -g wrangler
  - npx wrangler pages publish public --project-name é¡¹ç›®å --commit-dirty=true</code></pre><p>å¯ä»¥è§åˆ°å’Œ <code>GitHub Actions</code> çš„é…ç½®è¿˜æ˜¯æŒºåƒçš„ï¼Œç¢ç£¨ç¢ç£¨è¿˜æ˜¯æŒºå¿«ä¸Šæ‰‹çš„ã€‚</p><p>å…¶ä¸­ <code>steps</code> æŒ‡å®šäº†æ‰€éœ€æ­¥éª¤ï¼Œ<code>image</code> æŒ‡å®šäº†éœ€è¦ä»€ä¹ˆæ ·çš„ <code>docker</code> é•œåƒï¼Œç¬¬ä¸€æ æ‹‰å–äº† <code>klakegg/hugo</code> é•œåƒå¹¶ä½¿ç”¨ <code>hugo</code> å‘½ä»¤ç”Ÿæˆé™æ€æ–‡ä»¶ã€‚</p><p>ä¹‹åæ˜¯ <code>deploy</code> ä¸€æ é‡Œçš„ <code>environment</code> ï¼Œåƒ <code>GitHub</code> ä¸€æ ·ï¼Œå¯†é’¥ç›¸å…³å¯ä»¥ä½¿ç”¨ <code>secret</code> åŠŸèƒ½å¯¼å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ï¼Œå¯åœ¨è‡ªå·±çš„ <code>cicd.git.server</code> â†’ç›¸å…³ä»“åº“â†’ <code>Settings</code> â†’ <code>Secrets</code> é‡Œè¿›è¡Œå¯¼å…¥ã€‚</p><p>æ¥ä¸‹æ¥ä½¿ç”¨ <code>node</code> é•œåƒå®‰è£…äº†ä¸ª <code>wrangler</code> åŒ…ï¼Œè¿™æ˜¯ <code>Cloudflare Pages</code> éƒ¨ç½²è¦ç”¨çš„ï¼Œå¦‚æœä¹Ÿç”¨ <code>Cloudflare Pages</code> éƒ¨ç½²çš„è¯å¯ä»¥å‚è€ƒ:</p><p><a href="https://developers.cloudflare.com/workers/wrangler/commands/#pages" class="external_link">Wrangler pages commands</a></p><p><a href="https://developers.cloudflare.com/workers/wrangler/ci-cd/" class="external_link">Running Wrangler in CI/CD</a></p><p>PSï¼šä¸å¾—ä¸åæ§½ç›¸å…³æ“ä½œé¦–å…ˆå¿…é¡»è¦ç”¨ <code>project create</code> å‘½ä»¤é‡Œçš„ <code>--production-branch</code> æ˜¾å¼æŒ‡å®šéƒ¨ç½²åˆ†æ”¯å¦åˆ™æ¥ä¸‹æ¥çš„éƒ¨ç½²éƒ½ä¼šè¢«è¯†åˆ«ä¸ºé¢„è§ˆè€Œä¸ä¼šçœŸæ­£éƒ¨ç½²åˆ°â€¦â€¦è¢«è¿™ä¸ªå‘å¡äº†å¥½ä¸€ä¼šâ€¦â€¦</p><p>ä¹‹åå†è¿›è¡Œç›¸å…³æ“ä½œååº”è¯¥èƒ½çœ‹è§è‡ªå·± <code>Gitea</code> å®ä¾‹ä¹Ÿæœ‰å°ç»¿å‹¾äº†ï¼ˆå°çº¢å‰ä¹Ÿè¡Œï¼Œè‡³å°‘è¯å®è‡ªåŠ¨éƒ¨ç½²æœåŠ¡æœ‰åœ¨ç”¨äº†ï¼‰ï¼</p><h3 id="åŠ ä¸»é¢˜">åŠ ä¸»é¢˜</h3><p>é»˜è®¤ä¸»é¢˜è¿˜æŒºç¨‹åºå‘˜é£æ ¼çš„ï¼Œæ—¢ç„¶éƒ½è‡ªå»ºäº†ï¼Œè‚¯å®šè¦åŠ ç‚¹ä¸»é¢˜å¿«ä¹ä¸€ä¸‹äº†ã€‚</p><p>ä»¥<a href="https://codeberg.org/Freeplay/Gitea-Modern/" class="external_link">ç°ä»£ä¸»é¢˜</a>ä¸ºä¾‹ã€‚</p><p>å¦‚æœæ˜¯ä»¥ä¸Šé¢çš„é…ç½®æ–‡ä»¶æ­å»ºèµ·æ¥çš„è¯è¦åœ¨è‡ªå·±æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° <code>./data/gitea/gitea</code> è·¯å¾„ï¼Œå¹¶åœ¨é‡Œå¤´æ–°å»º <code>public/css</code> ä¸‹ <code>wget https://codeberg.org/Freeplay/Gitea-Modern/raw/branch/main/Gitea/theme-gitea-modern.css</code>  è·å–ä¸»é¢˜æ–‡ä»¶ã€‚</p><p>ä¹‹åå†ç¼–è¾‘ <code>./data/gitea/gitea/conf/app.ini</code> æ–‡ä»¶ï¼Œåœ¨æœ€åé¢åŠ ä¸Šï¼š</p><pre><code>è¯·è‡ªå·±æƒ³è±¡ä¸‹â€¦â€¦
å› ä¸ºç°åœ¨æˆ‘æœåŠ¡å™¨ç‚¸äº†â€¦â€¦</code></pre><p>ä¹‹åå†ç”¨ <code>docker-compose down</code>  å’Œ <code>docker-compose up -d</code> é‡å¯æœåŠ¡ã€‚</p><h3 id="å®‰å…¨">å®‰å…¨</h3><p>å¦‚æœæ²¡æœ‰ç›¸å…³è¦æ±‚ï¼Œè¯·åŠ¡å¿…å…³é—­å®ä¾‹çš„æ³¨å†ŒåŠŸèƒ½ã€‚</p><p>å‚è§ï¼Œ<a href="https://imlonghao.com/59.html" class="external_link">è®°ä¸€æ¬¡è‡ªå»º Gitea + Drone å®ä¾‹è¢«æŒ–çŸ¿çš„ç»å†</a></p><p>ä¹Ÿæ˜¯ä¿®æ”¹ <code>./data/gitea/gitea/conf/app.ini</code> é‡Œçš„ï¼š</p><pre><code>è¯·è‡ªå·±æŸ¥é˜…â€¦â€¦
å› ä¸ºæˆ‘ç°åœ¨æœåŠ¡å™¨ç‚¸äº†</code></pre><p>ä¹‹åå†ç”¨ <code>docker-compose down</code>  å’Œ <code>docker-compose up -d</code> é‡å¯æœåŠ¡ï¼Œç„¶åå†æ£€æŸ¥ç«™ç‚¹æ˜¯å¦å…³é—­äº†æ³¨å†Œå…¥å£ã€‚</p><h3 id="å‚è€ƒ">å‚è€ƒ</h3><p><a href="https://blog.ruanbekker.com/blog/2021/03/09/cicd-with-droneci-and-gitea-using-docker-compose/" class="external_link">CICD With DroneCI and Gitea Using Docker Compose</a></p><p><a href="https://docs.gitea.io/en-us/" class="external_link">Gitea Docs</a></p><p><a href="https://docs.drone.io/" class="external_link">Drone Docs</a></p><p><a href="https://tech.ray247k.com/blog/202106-drone-cicd-3-advanced-cron-job/" class="external_link">é€é Drone å»ºç«‹è‡ªå‹•éƒ¨ç½²æµç¨‹ï¼Œéƒ¨ç½²æ’ç¨‹è¨­å®šèˆ‡æ¬Šé™ç®¡ç† - è–›ä¸æ ¼çš„å·¥ç¨‹å¸«</a></p></div></div></main><div class="pagination"><a class="btn" href="/2022/08/å¦‚ä½•æ”¹å˜è‡ªå·±/">â† ä¸Šä¸€é¡µ</a><a class="btn" href="/"> ä¸»é¡µ </a><a class="btn" href="/2022/06/äºŒäºŒå¹´å…­æœˆæ¢¦è®°/">ä¸‹ä¸€é¡µ â†’</a></div><div class="comment"><blockquote>å¦‚ä¸æƒ³æˆæƒ Giscus åº”ç”¨ï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»ä¸‹æ–¹<strong>å·¦ä¸Šè§’æ•°å­—</strong>ç›´æ¥è·³è½¬åˆ° Github Discussions è¿›è¡Œè¯„è®ºã€‚</blockquote><script src="https://giscus.app/client.js" data-repo="SouthFox-D/SouthFox-D.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyMjg3NDM0MjQ=" data-category="åšå®¢è¯„è®º" data-category-id="DIC_kwDODaJZAM4CA7bf" data-mapping="specific" data-term="2022/07/Gitea:ä¸€æ¬¾è‡ªæ‰˜ç®¡çš„-Git-æœåŠ¡/" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="top" data-theme="dark_dimmed" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async=""></script></div></div><div class="sidebar"><div class="widget"><h4>é“¾æ¥</h4><ul><li><a href="/friends/">å‹é“¾</a></li><li><a href="https://www.travellings.cn/train.html">å¼€å¾€</a></li><li><a href="https://foreverblog.cn/go.html">è™«æ´</a></li><li><a href="/feed.xml">è®¢é˜…ï¼ˆAtom)</a></li><li><a href="/rss2.xml">è®¢é˜…ï¼ˆRss)</a></li><li><a href="https://www.lisperati.com/logo.html"><img src="/assets/img/lisplogo_warning2_128.png" alt="Lisp logo warning" /></a></li><li><a href="https://www.fsf.org/appeal"><img src="/assets/img/6838639.png" alt="FSF appeal" /></a></li></ul><div><a href="https://xn--sr8hvo.ws/previous">â†</a><a href="https://xn--sr8hvo.ws">IndieWeb Webring ğŸ’</a><a href="https://xn--sr8hvo.ws/next">â†’</a></div><div><a href="https://fediring.net/previous?host=blog.southfox.me">â†</a><a href="https://fediring.net">Fediring ğŸ’</a><a href="https://fediring.net/next?host=blog.southfox.me">â†’</a></div></div><div class="widget"><h4>è®¾ç½®</h4><div><label for="font-select">å­—ä½“è®¾ç½®ï¼š</label><select id="font-select"><option value="plain">æ™®é€š</option><option value="zpix">åƒç´ </option></select></div></div><div class="widget"><h4>æ ‡ç­¾</h4><ul><li><a href="/tag/æŠ€æœ¯">æŠ€æœ¯</a></li><li><a href="/tag/è‡ªæ‰˜ç®¡">è‡ªæ‰˜ç®¡</a></li></ul></div><div class="widget"><h4>ç›®å½•</h4><ul><li><a href="#ç»•ä¸å¼€çš„å­˜åœ¨">ç»•ä¸å¼€çš„å­˜åœ¨</a></li><li><a href="#Gitea">Gitea</a></li><li><a href="#Drone">Drone</a></li><li><a href="#ä»“åº“æ“ä½œ">ä»“åº“æ“ä½œ</a></li><li><a href="#ä¸€ä¸ªæ¡ˆä¾‹">ä¸€ä¸ªæ¡ˆä¾‹</a></li><li><a href="#åŠ ä¸»é¢˜">åŠ ä¸»é¢˜</a></li><li><a href="#å®‰å…¨">å®‰å…¨</a></li><li><a href="#å‚è€ƒ">å‚è€ƒ</a></li></ul></div></div></div><footer class="footer"><div class="copyright"><div><p>Â© SouthFox 2026 ,Font by <a href="https://github.com/SolidZORO/zpix-pixel-font">Zpix</a></p></div><div><p>Power by <a href="https://dthompson.us/projects/haunt.html">haunt</a> ,source can be found <a href="https://git.southfox.me/southfox/blog">here</a></p></div></div></footer></body></html>