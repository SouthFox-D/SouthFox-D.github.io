---
author: SouthFox
title: 为博客支持评论系统
date: 2022-01-31 11:31:57
tags: 
- 技术
- 建站
category: 技术
toc: true
---

突然发现加入十年之约的博客评论区都好热闹……似乎都是随机访问过来的，所以还是有必要为博客加上评论系统的？

<!--more-->

考察了一番选择了依靠 `GitHub Discussions` 的 `Giscus` 做为博客的评论系统。

## 特点

👍 优点：

- 比起 `Gitalk` ，拥有更小的权限请求
- 部署也方便，十分钟内都能轻松搞定
- 据安全也有 `GitHub` 做背书，至少比自建强
- 拉取 `Discussions` 数据的脚本是放在 `vercel` 上，国内看评论至少是没问题的

🙃 缺点：

- 评论得需要个 `GitHub` 帐号，对于没有相关经验的人真可谓叹息之墙了，但是也不全是坏事，倒垃圾评论也能隔绝掉大部分。



## 部署

1. 首先先去 https://github.com/apps/giscus 安装 `Giscus` ，可以仅给指定的仓库授权。
2. 到 https://giscus.app/zh-CN 进行配置，输入仓库名，决定映射方式等、评论样式等。
3. 最后生成一个脚本代码，嵌入到博客文章模板底部，搞定！



## 坑

如果映射方式选择 `pathname`，而 uri 里包含中文，将会被解码，搞得非常乱。所以可以自己麻烦一点，手动指定。

如 `Hexo` ，在 `head` 模板中插入到 `<head>` 标签里：

```ejs
<% if (page.title){ %><meta property="og:title" content="<%= page.path %>"/><% } %>
```

之后 `Giscus` 选择为 `og:title` ，这样就确保标题不会被转码了。



## 展望

总体来说还是不错的，再折腾一下可以选择自建，这样可以避开对脚本所在域名的封锁，或者部署时自动创建对应帖子，不过挺麻烦，以后在摸吧 🐟 。

最后，欢迎你能访问到我这荒岛，请友善评论哦~

