<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><meta property="og:title" content="在自己电脑上搭建 Peertube — 狐狸反走矣" /><meta property="og:site_name" content="狐狸反走矣" /><meta property="og:image" content="https://blog.southfox.me/favicon.png" /><meta name="fediverse:creator" content="SouthFox@foxsay.southfox.me" /><title>在自己电脑上搭建 Peertube — 狐狸反走矣</title><link rel="me" href="https://foxsay.southfox.me/@SouthFox" /><link rel="me" href="https://codeberg.org/southfox" /><script src="/assets/js/lips.min.js"></script><link rel="stylesheet" href="/assets/css/main.css" /><script type="text/x-scheme">(let ((font (or (localStorage.getItem "font") "zpix")) (font-select (document.getElementById "font-select"))) (define (string=? a b) (== (a.cmp b) 0)) (define (loop-set options value) (let loop ((i 0)) (if (> i (- (length options) 1)) i (let ((option (get options i))) (if (string=? option.value value) (option.setAttribute "selected" #t) (loop (+ 1 i))))))) (define (set-font font-name) (localStorage.setItem "font" font-name) (document.documentElement.setAttribute "data-font" font-name) (if font-select (loop-set font-select.options font-name))) (font-select.addEventListener "change" (lambda (event) (set-font event.target.value))) (set-font font))</script><link rel="alternative" href="/feed.xml" title="狐狸反走矣" type="application/atom+xml" /><link rel="alternative" href="/rss2.xml" title="狐狸反走矣" type="application/rss+xml" /></head><body><nav class="nav"><a href="/" class="brand"><span>狐狸反走矣</span></a><input id="bmenub" type="checkbox" class="show" aria-label="open menu" /><label for="bmenub" class="burger pseudo button">☰</label><div class="menu"><a href="/archives/">归档</a><a href="/tags/">标签</a><a href="/search/">搜索</a><a href="/about/">关于</a></div></nav><div class="container flex"><div class="content"><main data-pagefind-body="true"><div><h2>在自己电脑上搭建 Peertube</h2><h3>by SouthFox</h3><h3 data-pagefind-sort="date">2021-06-17</h3><div><p>Peertube 是一个自由、去中心化、邦联制运作的视频平台。</p><span id="more"></span><p>具体的介绍可以看视频：</p><p>&lt;iframe width=&quot;560&quot; height=&quot;315&quot; sandbox=&quot;allow-same-origin allow-scripts allow-popups&quot; title=&quot;What is PeerTube?&quot; src=&quot;https://framatube.org/videos/embed/9c9de5e8-0a1e-484a-b099-e80766180a6d?subtitle=zh&quot; frameborder=&quot;0&quot; allowfullscreen&gt;&lt;/iframe&gt;</p><p>比起搭建在托管服务器上，搭建在自己电脑上可以有诸多好处，最大的好处就是存储空间和管理的自由。当然服务的运行会随着电脑的休眠而暂停，要是想一直运行的话得不间断开机……（当然也可以使用树莓派、 NAS 的方式来做到不间断开机）</p><h2 id="准备">准备</h2><h3 id="公网IP">公网 IP</h3><p>想要将自己电脑上的服务开放至整个互联网，公网 IP 是大前提，这一点请咨询运营商，有一些比较宽松，有一些就很扯皮了。不过珠三角地区电信运营商可以在宽带帐号 at 后加 <code>pub.</code>，重启猫后就是公网 IP 了。</p><p>当然，也可以使用 IPV6 ，不过 2021 年，IPV6 的普及率也不足百分之三十。就算自己的服务能够建起来，能访问的地区也是少数，所以还是满怀希望的等待吧！</p><p>拿到公网 IP 后，如果是用了 WIFI 模式或者有路由器的，得先在设备面板里启用端口映射，才能确保访问。</p><p>PS：国情所在，就算有了公网 IP ，也是封了 <code>80</code>,<code>443</code>,<code>8080</code>这些端口的，所以得使用不常用的高位端口。</p><h3 id="域名">域名</h3><p>家用的宽带就算拿到了公网 IP ，也会不定时更换地址，所以要固定访问地址和配置 HTTPS 首先得需要一个域名 ，当然要是不计较这个的话，这一点可以略过。但是这种方式搭建出来的实例适合运行在内网上，因为  “<strong>PeerTube does not support webserver host change</strong>”（不支持域名改变），第一次运行之后再次更改域名将导致报错……</p><p>域名可以去域名商寻找，当然也可以使用免费域名，最主流的是使用 <a href="https://www.freenom.com/zh/index.html?lang=zh" class="external_link">Freenom</a> ，可以免费申请到 .cf .ga .tk 三种类型的域名。</p><h3 id="DDNS">DDNS</h3><p>之后就是将公网 IP 绑定到域名上， Cloudflare 关闭了 .cf .ga .tk 使用 API 更改解析的方式，要更改得去网页面板更改。所以得用别家的，我使用的是 <a href="https://www.vultr.com/docs/how-to-setup-dynamic-dns" class="external_link">Vultr</a> 。</p><h2 id="安装">安装</h2><p>根据官方的 <a href="https://docs.joinpeertube.org/" class="external_link">文档</a> 走就是了，搭建一般都是在 Linux 下， Win 系统可以尝试用 <code>WSL</code> ，我采用的方式是用 Docker 安装，毕竟这样不容易搞乱原本日常用的环境。</p><p>不过在使用 certbot 镜像时，注意将命令替换成 <code>--preferred-challenges dns -d example.com</code> 因为国内家用宽带无法拿到 443 端口，所以得用 DNs 方式申请域名。</p><h3 id="坑">坑</h3><p>安装时倒是有一些坑陷了好久……</p><p>第一点就是端口要配置成一致的，不能容器和外面的不一样，要不然会因为不一致而报错。</p><p>但是就算这样也会导致 <code>Cannot retrieve OAuth Client credentials: undefined. Ensure you have correctly configured PeerTube (config/ directory), in particular the &quot;webserver&quot; section.</code> 错误，解决方式是在官方 nginx 模板 <code>location @api</code> 处 <code>proxy_set_header Host $host</code> 后面添加 <code>:所使用的端口</code> 才能解决问题[参考]（https://github.com/Chocobozzz/PeerTube/issues/3608）。</p><p>第二就是修改了 Docker 配置文件之后不自知，导致一直报错，非常脑残……所以有时候得全面检查配置文件才行……</p><h2 id="总结">总结</h2><p>期待数据自主的那天吧！不用忍受寡头背后叔叔的气，希望去中心化的互联网的环境到来……</p></div></div></main><div class="pagination"><a class="btn" href="/2021/07/搭建无污染的DNS服务/">← 上一页</a><a class="btn" href="/"> 主页 </a><a class="btn" href="/2021/06/躺平？/">下一页 →</a></div><div class="comment"><blockquote>如不想授权 Giscus 应用，也可以点击下方<strong>左上角数字</strong>直接跳转到 Github Discussions 进行评论。</blockquote><script src="https://giscus.app/client.js" data-repo="SouthFox-D/SouthFox-D.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkyMjg3NDM0MjQ=" data-category="博客评论" data-category-id="DIC_kwDODaJZAM4CA7bf" data-mapping="specific" data-term="2021/06/Peertube/" data-reactions-enabled="0" data-emit-metadata="0" data-input-position="top" data-theme="dark_dimmed" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async=""></script></div></div><div class="sidebar"><div class="widget"><h4>链接</h4><ul><li><a href="/friends/">友链</a></li><li><a href="https://www.travellings.cn/train.html">开往</a></li><li><a href="https://foreverblog.cn/go.html">虫洞</a></li><li><a href="/feed.xml">订阅（Atom)</a></li><li><a href="/rss2.xml">订阅（Rss)</a></li><li><a href="https://www.lisperati.com/logo.html"><img src="/assets/img/lisplogo_warning2_128.png" alt="Lisp logo warning" /></a></li><li><a href="https://www.fsf.org/appeal"><img src="/assets/img/6838639.png" alt="FSF appeal" /></a></li></ul><div><a href="https://xn--sr8hvo.ws/previous">←</a><a href="https://xn--sr8hvo.ws">IndieWeb Webring 💍</a><a href="https://xn--sr8hvo.ws/next">→</a></div><div><a href="https://fediring.net/previous?host=blog.southfox.me">←</a><a href="https://fediring.net">Fediring 💍</a><a href="https://fediring.net/next?host=blog.southfox.me">→</a></div></div><div class="widget"><h4>设置</h4><div><label for="font-select">字体设置：</label><select id="font-select"><option value="plain">普通</option><option value="zpix">像素</option></select></div></div><div class="widget"><h4>标签</h4><ul><li><a href="/tag/技术">技术</a></li><li><a href="/tag/自托管">自托管</a></li></ul></div><div class="widget"><h4>目录</h4><ul><li><a href="#准备">准备</a></li><li><a href="#公网IP">公网 IP</a></li><li><a href="#域名">域名</a></li><li><a href="#DDNS">DDNS</a></li><li><a href="#安装">安装</a></li><li><a href="#坑">坑</a></li><li><a href="#总结">总结</a></li></ul></div></div></div><footer class="footer"><div class="copyright"><div><p>© SouthFox 2026 ,Font by <a href="https://github.com/SolidZORO/zpix-pixel-font">Zpix</a></p></div><div><p>Power by <a href="https://dthompson.us/projects/haunt.html">haunt</a> ,source can be found <a href="https://git.southfox.me/southfox/blog">here</a></p></div></div></footer></body></html>